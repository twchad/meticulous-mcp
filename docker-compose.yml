services:
  meticulous-mcp:
    container_name: meticulous-mcp-server
    build: .
    ports:
      - "8080:8080"
    environment:
      - FASTMCP_HOST=0.0.0.0
      - FASTMCP_PORT=8080
      # Set METICULOUS_API_URL in your environment or .env file.
      # Examples: http://192.168.1.5, http://meticulous.local
      - METICULOUS_API_URL=${METICULOUS_API_URL:-http://meticulous.local}
    healthcheck:
      test: ["CMD", "python3", "-c", "import socket, sys; s = socket.socket(socket.AF_INET, socket.SOCK_STREAM); s.settimeout(5); result = s.connect_ex(('localhost', 8080)); s.close(); sys.exit(result)"]
      interval: 30s
      timeout: 5s
      retries: 3
      start_period: 5s
    volumes:
      # Mount source code for easier development/debugging if needed
      - ./meticulous-mcp/src:/app/meticulous-mcp/src
